			Настройки Nginx в /etc/nginx/nginx.conf

worker_connections 1024;
# Устанавливает максимальное количество соединений одного рабочего процесса. Следует выбирать значения от 1024 до 4096. 

worker_processes auto;
# Определяет количество рабочих процессов. Его лучше устанавливать в auto в новых версиях.

multi_accept on;
# Будет принимать максимально возможное количество соединений

sendfile on;
# Метод отправки данных sendfile более эффективен, чем стандартный метод read+write

tcp_nodelay on;
tcp_nopush on;
# Будет отправлять заголовки и и начало файла в одном пакете 

			Nginx умеет кешировать информацию о файлах, с которыми ему приходится работать (например, css стили или картинки). Если к таким файлам происходит много обращений, кеширование может значительно ускорить этот процесс.

open_file_cache max=200000 inactive=20s;
# Определяет максимальное количество файлов, информация о которых будет содержаться в кеше

open_file_cache_valid 30s;
# Определяет через какое время информация будет удалена из кеша

open_file_cache_min_uses 2;
# Будет кешировать информацию о тех файлах, которые были использованы хотя бы 2 раза

open_file_cache_errors on;
# Будет кешировать информацию об отсутствующих файлах


			Обязательно нужно использовать сжатие, это значительно уменьшит трафик. Проверить, включено ли сжатие, можно с помощью Gzip checker.

gzip on;
gzip_disable "msie6";
gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript;
# Будет сжимать все файлы с перечисленными типами


			Много проблем могут создать медленные (тупящие) клиенты. Медленная передача тела запроса от клиента к серверу и неожиданное закрытие клиентом соединений могут создать большое количество лишних соединений на сервере.

reset_timedout_connection on;
# Если клиент перестал читать отвечать, Nginx будет сбрасывать соединение с ним

client_body_timeout 10;
# Будет ждать 10 секунд тело запроса от клиента, после чего сбросит соединение

send_timeout 2;
# Если клиент прекратит чтение ответа, Nginx подождет 2 секунды и сбросит соединение 
